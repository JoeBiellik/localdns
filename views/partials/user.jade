section.m-t-2.p-t-2.text-sm-center
  h3
    a(href='http://#{user.sub}.#{domain}')#domain #{user.sub}.#{domain}
    |  currently points to 
    a(href='http://#{user.ip}')#ip #{user.ip}

section.m-t-3.m-x-1.m-b-3
  form(method='post', action='/')
    div.row
      div.col-sm-9
        input(type='text', value=ip != user.ip ? ip : '', placeholder='IP Address', name='ip', title='Valid IPv4 address', pattern='^(?:(?:2[0-4]\\d|25[0-5]|1\\d{2}|[1-9]?\\d)\\.){3}(?:2[0-4]\\d|25[0-5]|1\\d{2}|[1-9]?\\d)$', required, autofocus).form-control.form-control-lg
      div.col-sm-3
        button(type='submit').btn.btn-lg.btn-primary.btn-block Update

section#status
  article#spinner
    div.double-bounce1
    div.double-bounce2

  article(style='display: none;')#results.p-x-1.m-b-3.card-group.text-sm-center
    div(data-toggle='tooltip' title="These results are from Google's public DNS service")#dns.card.card-inverse
      div.card-block
        h4.card-title DNS
        p.card-text
    div(data-toggle='tooltip' title='Checks for a response from an ICMP echo request')#ping.card.card-inverse
      div.card-block
        h4.card-title Ping
        p.card-text
    div(data-toggle='tooltip' title='Results of an HTTP GET request')#http.card.card-inverse
      div.card-block
        h4.card-title HTTP
        p.card-text

div.card.m-x-1.m-b-3
  div.card-block
    h4.card-title.m-b-2.text-muted Settings

    form(method='post', action='/')
      if errors && errors.sub
        div.form-group.row.has-danger
          div.col-sm-9
            div.input-group
              input(type='text', placeholder='Subdomain', name='sub', value=(body && body.sub && user.sub), title='2 to 63 characters; lowercase letters, numbers, dashes (-) and underscores (_). May not start with a dash', pattern='^[a-z0-9_][a-z0-9_-]{0,61}[a-z0-9_]$', required).form-control.form-control-danger
              span.input-group-addon .#{domain}
            div.alert.alert-danger #{errors.sub}
          div.col-sm-3
            button(type='submit').btn.btn-secondary.btn-block Change
      else
        div.form-group.row
          div.input-group.col-sm-9
            input(type='text', placeholder='Subdomain', name='sub', value=user.sub, title='2 to 63 characters; lowercase letters, numbers, dashes (-) and underscores (_). May not start with a dash', pattern='^[a-z0-9_][a-z0-9_-]{0,61}[a-z0-9_]$', required).form-control
            span.input-group-addon .#{domain}
          div.col-sm-3
            button(type='submit').btn.btn-secondary.btn-block Change
      
    form(method='post', action='/')
      if errors && errors.email
        div.form-group.row.has-danger
          div.col-sm-9
            input(type='email', placeholder='Email Address', name='email', value=(body && body.email && user.email), required).form-control.form-control-danger
            div.alert.alert-danger #{errors.email}
          div.col-sm-3
            button(type='submit').btn.btn-secondary.btn-block Change
      else
        div.form-group.row
          div.col-sm-9
            input(type='email', placeholder='Email Address', name='email', value=user.email, required).form-control
          div.col-sm-3
            button(type='submit').btn.btn-secondary.btn-block Change

    form(method='post', action='/')
      if errors && errors.password
        div.form-group.row.has-danger
          div.col-sm-9
            input(type='password', placeholder='Password', name='password', required).form-control.form-control-danger
            div.alert.alert-danger #{errors.password}
      else
        div.form-group.row
          div.col-sm-9
            input(type='password', placeholder='Password', name='password', required).form-control
      
      if errors && errors.password_confirm
        div.form-group.row.m-b-0.has-danger
          div.col-sm-9
            input(type='password', placeholder='Password Confirm', name='password_confirm', required).form-control.form-control-danger
            div.alert.alert-danger #{errors.password}
          div.col-sm-3
            button(type='submit').btn.btn-secondary.btn-block Change
      else
        div.form-group.row.m-b-0
          div.col-sm-9
            input(type='password', placeholder='Password Confirm', name='password_confirm', required).form-control
          div.col-sm-3
            button(type='submit').btn.btn-secondary.btn-block Change
            
script(src='https://code.jquery.com/jquery-2.2.2.min.js')
script(src='https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js')
script(src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.2/js/bootstrap.min.js')
script(src='/main.js')
